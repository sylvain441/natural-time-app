import{a as u,g as Lt,c as Et}from"./commonjsHelpers-BosuxZz1.js";import{C as jt,S as Ct,I as Tt,V as Nt,a as It,P as Pt,F as At,p as Rt}from"./LocationPicker-DD0YsMpM.js";var G={exports:{}};const Ft=u(jt),Mt=u(Ct),_t=u(Tt),Ot=u(Nt),Dt=u(It),Bt=u(Pt),Gt=u(At),Vt=u(Rt);/*!
 * ol-geocoder - v4.3.3
 * A geocoder extension compatible with OpenLayers v6.x to v9.0
 * https://github.com/Dominique92/ol-geocoder
 * Built: 15/03/2024 08:57:04
 */(function(V,zt){(function(E,x){V.exports=x(Ft,Mt,_t,Ot,Dt,Bt,Gt,Vt)})(Et,function(E,x,U,Q,z,H,K,J){function p(s){return s&&typeof s=="object"&&"default"in s?s:{default:s}}function W(s){if(s&&s.__esModule)return s;var t=Object.create(null);return s&&Object.keys(s).forEach(function(e){if(e!=="default"){var r=Object.getOwnPropertyDescriptor(s,e);Object.defineProperty(t,e,r.get?r:{enumerable:!0,get:function(){return s[e]}})}}),t.default=s,Object.freeze(t)}var X=p(E),Y=p(x),Z=p(U),tt=p(Q),et=p(z),st=p(H),rt=p(K),j=W(J),C="gcd-container",T="gcd-button-control",N="gcd-input-query",I="gcd-input-label",P="gcd-input-search",A={namespace:"ol-geocoder",spin:"gcd-pseudo-rotate",hidden:"gcd-hidden",address:"gcd-address",country:"gcd-country",city:"gcd-city",road:"gcd-road",olControl:"ol-control",glass:{container:"gcd-gl-container",control:"gcd-gl-control",button:"gcd-gl-btn",input:"gcd-gl-input",expanded:"gcd-gl-expanded",search:"gcd-gl-search",result:"gcd-gl-result"},inputText:{container:"gcd-txt-container",control:"gcd-txt-control",label:"gcd-txt-label",input:"gcd-txt-input",search:"gcd-txt-search",icon:"gcd-txt-glass",result:"gcd-txt-result"}},nt={containerId:C,buttonControlId:T,inputQueryId:N,inputLabelId:I,inputSearchId:P,cssClasses:A};const d=Object.freeze({__proto__:null,containerId:C,buttonControlId:T,inputQueryId:N,inputLabelId:I,inputSearchId:P,cssClasses:A,default:nt}),R="addresschosen",f="nominatim",F="reverse",k="glass-button",at="text-input",ot="bing",it="mapquest",lt="opencage",S="osm",ct="photon",dt="https://dev.virtualearth.net/REST/v1/Locations",ut="https://nominatim.openstreetmap.org/search",pt="https://api.opencagedata.com/geocode/v1/json?",ht="https://nominatim.openstreetmap.org/search",gt="https://photon.komoot.io/api/",mt={provider:S,label:"",placeholder:"Search for an address",featureStyle:null,targetType:k,lang:"en-US",limit:5,keepOpen:!1,preventDefault:!1,preventPanning:!1,preventMarker:!1,defaultFlyResolution:10,debug:!1};function M(s,t="Assertion failed"){if(!s)throw typeof Error<"u"?new Error(t):t}function _(s){const t=function(){if("performance"in window==0&&(window.performance={}),"now"in window.performance==0){let e=Date.now();performance.timing&&performance.timing.navigationStart&&(e=performance.timing.navigationStart),window.performance.now=()=>Date.now()-e}return window.performance.now()}().toString(36);return s?s+t:t}function b(s,t,e){if(Array.isArray(s))return void s.forEach(a=>b(a,t));const r=Array.isArray(t)?t:t.split(/\s+/u);let n=r.length;for(;n--;)q(s,r[n])||ft(s,r[n])}function m(s,t,e){if(Array.isArray(s))return void s.forEach(a=>m(a,t));const r=Array.isArray(t)?t:t.split(/\s+/u);let n=r.length;for(;n--;)q(s,r[n])&&bt(s,r[n])}function q(s,t){return s.classList?s.classList.contains(t):D(t).test(s.className)}function O(s){for(;s.firstChild;)s.firstChild.remove()}function yt(s,t){return s.replace(/\{\s*([\w-]+)\s*\}/gu,(e,r)=>{const n=t[r]===void 0?"":t[r];return String(n).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")})}function v(s,t){let e;if(Array.isArray(s)){if(e=document.createElement(s[0]),s[1].id&&(e.id=s[1].id),s[1].classname&&(e.className=s[1].classname),s[1].attr){const{attr:n}=s[1];if(Array.isArray(n)){let a=-1;for(;++a<n.length;)e.setAttribute(n[a].name,n[a].value)}else e.setAttribute(n.name,n.value)}}else e=document.createElement(s);e.innerHTML=t;const r=document.createDocumentFragment();for(;e.childNodes[0];)r.append(e.childNodes[0]);return e.append(r),e}function D(s){return new RegExp(`(^|\\s+) ${s} (\\s+|$)`,"u")}function ft(s,t,e){s.classList?s.classList.add(t):s.className=`${s.className} ${t}`.trim()}function bt(s,t,e){s.classList?s.classList.remove(t):s.className=s.className.replace(D(t)," ").trim()}const o=d.cssClasses;class y{constructor(t){this.options=t,this.els=this.createControl()}createControl(){let t,e,r;return this.options.targetType===at?(e=`${o.namespace} ${o.inputText.container}`,t=v(["div",{id:d.containerId,classname:e}],y.input),r={container:t,control:t.querySelector(`.${o.inputText.control}`),label:t.querySelector(`.${o.inputText.label}`),input:t.querySelector(`.${o.inputText.input}`),search:t.querySelector(`.${o.inputText.search}`),result:t.querySelector(`.${o.inputText.result}`)},r.label.innerHTML=this.options.label):(e=`${o.namespace} ${o.glass.container}`,t=v(["div",{id:d.containerId,classname:e}],y.glass),r={container:t,control:t.querySelector(`.${o.glass.control}`),button:t.querySelector(`.${o.glass.button}`),input:t.querySelector(`.${o.glass.input}`),search:t.querySelector(`.${o.glass.search}`),result:t.querySelector(`.${o.glass.result}`)}),r.input.placeholder=this.options.placeholder,r}}function vt(s){return new Promise((t,e)=>{const r=function(a,c){return c&&typeof c=="object"&&(a+=(/\?/u.test(a)?"&":"?")+B(c)),a}(s.url,s.data),n={method:"GET",mode:"cors",credentials:"same-origin"};s.jsonp?function(a,c,$){const{head:h}=document,l=document.createElement("script"),g=`f${Math.round(Math.random()*Date.now())}`;l.setAttribute("src",`${a+(a.indexOf("?")>0?"&":"?")+c}=${g}`),window[g]=L=>{window[g]=void 0,setTimeout(()=>h.removeChild(l),0),$(L)},h.append(l)}(r,s.callbackName,t):fetch(r,n).then(a=>a.json()).then(t).catch(e)})}function B(s){return Object.keys(s).reduce((t,e)=>(t.push(typeof s[e]=="object"?B(s[e]):`${encodeURIComponent(e)}=${encodeURIComponent(s[e])}`),t),[]).join("&")}y.glass=`
  <div class="${o.glass.control} ${o.olControl}">
    <button type="button" id="${d.buttonControlId}" class="${o.glass.button}"></button>
    <input type="text" id="${d.inputQueryId}" class="${o.glass.input}" autocomplete="off" placeholder="Search ...">
    <a id="${d.inputSearchId}" class="${o.glass.search} ${o.hidden}"></a>
  </div>
  <ul class="${o.glass.result}"></ul>
`,y.input=`
  <div class="${o.inputText.control}">
    <label type="button" id="${d.inputSearchId}" class="${o.inputText.label}"></label>
    <input type="text" id="${d.inputQueryId}" class="${o.inputText.input}" autocomplete="off" placeholder="Search ...">
    <span class="${o.inputText.icon}"></span>
    <button type="button" id="${d.inputSearchId}" class="${o.inputText.search} ${o.hidden}"></button>
  </div>
  <ul class="${o.inputText.result}"></ul>
`;class wt{constructor(){this.settings={url:gt,params:{q:"",limit:10,lang:"en"},langs:["de","it","fr","en"]}}getParameters(t){return t.lang=t.lang.toLowerCase(),{url:this.settings.url,params:{q:t.query,limit:t.limit||this.settings.params.limit,lang:this.settings.langs.includes(t.lang)?t.lang:this.settings.params.lang}}}handleResponse(t){return t.features.length===0?[]:t.features.map(e=>({lon:e.geometry.coordinates[0],lat:e.geometry.coordinates[1],address:{name:e.properties.name,postcode:e.properties.postcode,city:e.properties.city,state:e.properties.state,country:e.properties.country},original:{formatted:e.properties.name,details:e.properties}}))}}class $t{constructor(t){this.settings={url:ht,...t,params:{q:"",format:"json",addressdetails:1,limit:10,countrycodes:"",viewbox:"","accept-language":"en-US"}}}getParameters(t){return{url:this.settings.url,params:{q:t.query,format:this.settings.params.format,addressdetails:this.settings.params.addressdetails,limit:t.limit||this.settings.params.limit,countrycodes:t.countrycodes||this.settings.params.countrycodes,viewbox:t.viewbox||this.settings.params.viewbox,"accept-language":t.lang||this.settings.params["accept-language"]}}}handleResponse(t){return t.length===0?[]:t.map(e=>({lon:e.lon,lat:e.lat,bbox:e.boundingbox,address:{name:e.display_name,road:e.address.road||"",houseNumber:e.address.house_number||"",postcode:e.address.postcode,city:e.address.city||e.address.town,state:e.address.state,country:e.address.country},original:{formatted:e.display_name,details:e.address}}))}}class xt{constructor(){this.settings={url:ut,params:{q:"",key:"",format:"json",addressdetails:1,limit:10,countrycodes:"","accept-language":"en-US"}}}getParameters(t){return{url:this.settings.url,params:{q:t.query,key:t.key,format:"json",addressdetails:1,limit:t.limit||this.settings.params.limit,countrycodes:t.countrycodes||this.settings.params.countrycodes,"accept-language":t.lang||this.settings.params["accept-language"]}}}handleResponse(t){return t.length===0?[]:t.map(e=>({lon:e.lon,lat:e.lat,address:{name:e.address.neighbourhood||"",road:e.address.road||"",postcode:e.address.postcode,city:e.address.city||e.address.town,state:e.address.state,country:e.address.country},original:{formatted:e.display_name,details:e.address}}))}}class kt{constructor(){this.settings={url:dt,callbackName:"jsonp",params:{query:"",key:"",includeNeighborhood:0,maxResults:10}}}getParameters(t){return{url:this.settings.url,callbackName:this.settings.callbackName,params:{query:t.query,key:t.key,includeNeighborhood:t.includeNeighborhood||this.settings.params.includeNeighborhood,maxResults:t.maxResults||this.settings.params.maxResults}}}handleResponse(t){const{resources:e}=t.resourceSets[0];return e.length===0?[]:e.map(r=>({lon:r.point.coordinates[1],lat:r.point.coordinates[0],address:{name:r.name},original:{formatted:r.address.formattedAddress,details:r.address}}))}}class St{constructor(){this.settings={url:pt,params:{q:"",key:"",limit:10,countrycode:"",pretty:1,no_annotations:1}}}getParameters(t){return{url:this.settings.url,params:{q:t.query,key:t.key,limit:t.limit||this.settings.params.limit,countrycode:t.countrycodes||this.settings.params.countrycodes}}}handleResponse(t){return t.results.length===0?[]:t.results.map(e=>({lon:e.geometry.lng,lat:e.geometry.lat,address:{name:e.components.house_number||"",road:e.components.road||"",postcode:e.components.postcode,city:e.components.city||e.components.town,state:e.components.state,country:e.components.country},original:{formatted:e.formatted,details:e.components}}))}}const i=d.cssClasses;class qt{constructor(t,e){this.Base=t,this.layerName=_("geocoder-layer-"),this.layer=new tt.default({background:"transparent",name:this.layerName,source:new et.default,displayInLayerSwitcher:!1}),this.options=t.options,this.options.provider=typeof this.options.provider=="string"?this.options.provider.toLowerCase():this.options.provider,this.provider=this.newProvider(),this.els=e,this.container=this.els.container,this.registeredListeners={mapClick:!1},this.setListeners()}setListeners(){const t=e=>{e.stopPropagation(),q(this.els.control,i.glass.expanded)?this.collapse():this.expand()};this.els.input.addEventListener("keypress",e=>{const r=e.target.value.trim();(e.key?e.key==="Enter":e.which?e.which===13:e.keyCode&&e.keyCode===13)&&(e.preventDefault(),this.query(r))},!1),this.els.input.addEventListener("click",e=>e.stopPropagation(),!1),this.els.input.addEventListener("input",e=>{e.target.value.trim().length!==0?m(this.els.search,i.hidden):b(this.els.search,i.hidden)},!1),this.els.search.addEventListener("click",()=>{this.els.input.focus(),this.query(this.els.input.value)},!1),this.options.targetType===k&&this.els.button.addEventListener("click",t,!1)}query(t){this.provider||(this.provider=this.newProvider());const e=this.provider.getParameters({query:t,key:this.options.key,lang:this.options.lang,countrycodes:this.options.countrycodes,viewbox:this.options.viewbox,limit:this.options.limit});this.clearResults(this.options.keepOpen===!1),b(this.els.search,i.spin);const r={url:e.url,data:e.params};e.callbackName&&(r.jsonp=!0,r.callbackName=e.callbackName),vt(r).then(n=>{this.options.debug&&console.info(n),m(this.els.search,i.spin);const a=this.provider.handleResponse(n);a&&(this.createList(a),this.listenMapClick())}).catch(()=>{m(this.els.search,i.spin);const n=v("li","<h5>Error! No internet connection?</h5>");this.els.result.append(n)})}createList(t){const e=this.els.result;t.forEach(r=>{let n;if(this.options.provider===S?n=`<span class="${i.road}">${r.address.name}</span>`:n=this.addressTemplate(r.address),t.length==1)this.chosen(r,n,r.address,r.original);else{const a=v("li",`<a href="#">${n}</a>`);a.addEventListener("click",c=>{c.preventDefault(),this.chosen(r,n,r.address,r.original)},!1),e.append(a)}})}chosen(t,e,r,n){const a=this.Base.getMap(),c=[Number.parseFloat(t.lon),Number.parseFloat(t.lat)],$=a.getView().getProjection(),h=j.transform(c,"EPSG:4326",$);let{bbox:l}=t;l&&(l=j.transformExtent([parseFloat(l[2]),parseFloat(l[0]),parseFloat(l[3]),parseFloat(l[1])],"EPSG:4326",$));const g={formatted:e,details:r,original:n};if(this.clearResults(!0),this.options.preventDefault===!0||this.options.preventMarker===!0)this.Base.dispatchEvent({type:R,address:g,coordinate:h,bbox:l,place:t});else{const L=this.createFeature(h,g);this.Base.dispatchEvent({type:R,address:g,feature:L,coordinate:h,bbox:l,place:t})}this.options.preventDefault!==!0&&this.options.preventPanning!==!0&&(l?a.getView().fit(l,{duration:500}):a.getView().animate({center:h,resolution:this.options.defaultFlyResolution,duration:500}))}createFeature(t){const e=new rt.default(new st.default(t));return this.addLayer(),e.setStyle(this.options.featureStyle),e.setId(_("geocoder-ft-")),this.getSource().addFeature(e),e}addressTemplate(t){const e=[];return t.name&&e.push(['<span class="',i.road,'">{name}</span>'].join("")),(t.road||t.building||t.house_number)&&e.push(['<span class="',i.road,'">{building} {road} {house_number}</span>'].join("")),(t.city||t.town||t.village)&&e.push(['<span class="',i.city,'">{postcode} {city} {town} {village}</span>'].join("")),(t.state||t.country)&&e.push(['<span class="',i.country,'">{state} {country}</span>'].join("")),yt(e.join("<br>"),t)}newProvider(){switch(this.options.provider){case S:return new $t(this.options);case it:return new xt;case ct:return new wt;case ot:return new kt;case lt:return new St;default:return this.options.provider}}expand(){m(this.els.input,i.spin),b(this.els.control,i.glass.expanded),window.setTimeout(()=>this.els.input.focus(),100),this.listenMapClick()}collapse(){this.els.input.value="",this.els.input.blur(),b(this.els.search,i.hidden),m(this.els.control,i.glass.expanded),O(this.els.result)}listenMapClick(){if(this.registeredListeners.mapClick)return;const t=this,e=this.Base.getMap().getTargetElement();this.registeredListeners.mapClick=!0,e.addEventListener("click",{handleEvent(r){e.removeEventListener(r.type,this,!1),t.registeredListeners.mapClick=!1}},!1)}clearResults(t){t&&this.options.targetType===k?this.collapse():O(this.els.result)}getSource(){return this.layer.getSource()}addLayer(){let t=!1;const e=this.Base.getMap();e.getLayers().forEach(r=>{r===this.layer&&(t=!0)}),t||e.addLayer(this.layer)}}class w extends X.default{constructor(t=f,e){M(typeof t=="string","@param `type` should be string!"),M(t===f||t===F,`@param 'type' should be '${f}'
      or '${F}'!`);const r={...mt,featureStyle:[new Y.default({image:new Z.default({anchor:[.5,1],src:'data:image/svg+xml;charset=utf-8,<svg width="26" height="42" viewBox="0 0 26 42" xmlns="http://www.w3.org/2000/svg"><polygon points="1,18 14,42 25,18" fill="rgb(75,75,75)" /><ellipse cx="13" cy="13" rx="13" ry="13" fill="rgb(75,75,75)" /><ellipse cx="13" cy="14" rx="6" ry="6" fill="yellow" /></svg>'})})],...e};let n,a;const c=new y(r);if(t===f&&(n=c.els.container),super({element:n,...r}),!(this instanceof w))return new w;this.options=r,this.container=n,t===f&&(a=new qt(this,c.els),this.layer=a.layer)}getLayer(){return this.layer}getSource(){return this.getLayer().getSource()}setProvider(t){this.options.provider=t}setProviderKey(t){this.options.key=t}}return w})})(G);var Ut=G.exports;const Qt=Lt(Ut),Jt=Object.freeze(Object.defineProperty({__proto__:null,default:Qt},Symbol.toStringTag,{value:"Module"}));export{Jt as o};
